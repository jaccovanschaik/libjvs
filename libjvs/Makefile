include /home/jacco/.make/make.sysdep

# Makefile for Jacco's ToolKit.
#
# Copyright:	(c) 2007 Jacco van Schaik (jacco@jaccovanschaik.net)
# Version:	$Id: Makefile 244 2007-08-13 10:58:11Z jacco $
#
# This software is distributed under the terms of the MIT license. See
# http://www.opensource.org/licenses/mit-license.php for details.

.PHONY: tags test

LIBJVS = vector.o buffer.o hash.o list.o net.o sdr.o ts.o debug.o cx.o nx.o utils.o

CFLAGS = -g -fPIC

all: libjvs.a libjvs.so

libjvs.a: $(LIBJVS)
	$(MAKE_ALIB) libjvs.a $(LIBJVS)

libjvs.so: $(LIBJVS)
	$(MAKE_SLIB) libjvs.so $(LIBJVS)

clean:
	rm -f *.o libjvs.a libjvs.so core libjvs.tgz a.out

libjvs.tgz: clean
	tar cvf - `ls | grep -v libjvs.tgz` | gzip > libjvs.tgz

install: libjvs.a libjvs.so
	if [ ! -d $(INSTALL_LIB) ]; then mkdir -p $(INSTALL_LIB); fi
	cp libjvs.a libjvs.so $(INSTALL_LIB)
	if [ ! -d $(INSTALL_INC)/jvs ]; then mkdir -p $(INSTALL_INC)/jvs; fi
	cp *.h $(INSTALL_INC)/jvs

tags:
	ctags -R . /usr/include

test: libjvs.a
	for f in `grep -l TEST *.c`; do \
          echo "Testing $$f"; \
          $(CC) $(CFLAGS) -DTEST $$f libjvs.a -lm && ./a.out; \
        done

# Dependencies - generated by deps on Fri Mar 16 21:20:39 CET 2012

buffer.o: buffer.c buffer.h
cx.o: cx.c buffer.h list.h net.h defs.h debug.h cx.h
debug.o: debug.c debug.h
dx.o: dx.c dx.h
hash.o: hash.c list.h hash.h
list.o: list.c list.h
net.o: net.c net.h debug.h
nx.o: nx.c debug.h buffer.h list.h defs.h net.h nx.h
sdr.o: sdr.c defs.h sdr.h
ts.o: ts.c buffer.h debug.h list.h ts.h
utils.o: utils.c utils.h
vector.o: vector.c defs.h vector.h
